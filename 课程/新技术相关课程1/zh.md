---
title: 
tags:
mathjax: True
---
# 课程重点
- ATM技术原理：统计复用
- 业务服务质量与性能：语义透明性与时间透明性
- ATM的协议结构：ATM层／AAL层协议、格式
- ATM交换原理
    - VPI/VCI交换概念
    - 三种排队方式
- ATM流量控制
    - 基本概念(业务类型、CAC/UPC、业务量合约、反馈控制等)
    - 一致性判定
- IP over ATM
    - 对等模型、集成模型
    - CIPOA、IP Switching、Tag Switching
- MPLS
    - 概念、格式
    - 标签交换原理、标签分发
    - 应用: 流量工程、VPN概念
- IP QoS
    - QoS基本概念
    - 体系结构: IntServ、DiffServ
    - 主要QoS机制
        - IntServ: 接纳控制、资源预留、RSVP、分类器、整形/管制(令牌桶)、队列调度
        - DiffServ: 整形/管制、分类器、标记器(令牌桶)、队列管理(丢包RED)、队列调度

n段链路, 误比特率为P，分组长度为L, 通信系统的差错控制采用ARQ出错重传机制, 为了正确传送一个分组(L比特),链路上平均的业务量负荷
- 端到端的差错控制: 
    - 结论: $R=\frac{L}{(1 - B)^{nL}}$
    - 推导
$$R = a_0 · L + a_1 · 2L + ... + a_k · (k+1)L + ...$$
- 逐段链路控制: 
    - 结论: $R=\frac{L}{(1 - B)^{nL}}$
    - 推导

# 宽带网络的信息传递模式
之前通信技术的缺点：业务特性决定网络特性——为了满足各种业务需求设计了各种特定的网络，导致通用性很差。

分层
AAL
ATM
物理层
物理媒体子层(PM, Physical Medium)
传输会聚子层(TC, Transmission Convergence)



## ATM的特点
- 面向分组: 采用信元(小型分组)来承载数据
- 采用异步时分复用方式:
- 面向连接
- 不提供链路级别的差错控制和流量控制
- 信元头功能简化
- 信元的净荷长度较小

链路级别不做差错控制和流量控制，ATM的PDU——信元的头部功能就很少，信元的净荷长度较小

## 同步和异步的时分复用
同步时分复用: 将时间按一定的周期划分成帧，帧又分成若干定长的时隙。收发双方约定哪些时隙是目前在用的。
异步时分复用：也划分时隙，但是用户数据使用时隙是由网络动态分配的。网络动态分配的话，接收方就无法按照固定的时隙关系去提取数据。
解决方案：在数据中包含地址标识信息。
所以ATAM适用于突发性业务（数据对带宽资源的占用在变化）


## AAL
适配不同的业务

| 业务类型 | 业务实时性 | 业务源的比特率 | 连接的方式 | 举例 |
| :---: | :---: | :---: | :---: | :---: |
| A类 | 实时 | 恒定 | 面向连接 | PCM话音 |
| B类 | 实时 | 可变 |  面向连接 | 可变比特率的音频、视频 |
| C类 | 非实时 | 可变 |  面向连接 | 有连接的数据通信 |
| D类 | 非实时 | 可变 | 无连接 | 无连接的数据通信 |

SAR: 完成高层数据单元到ATM信元的映射(拆分和组装)
## 语义透明性
## 时间透明性

# ATM/B-ISDN体系结构
## ATM层
## AAL层
AAL结构
会聚子层CS
拆装子层SAR

AAL1
AAL2
AAL3/4

- ST(2 bit): 段类型(Segment Type)
    - 10: 消息开始(BOM, Beginning of Message)
    - 00: 消息继续(COM, Continuation of Message)
    - 01: 消息结束(EOM, End of Message)
    - 11: 单段消息(SSM, Single Segment Message)
- SN(4 bit): 序列号(Sequence Number), 用来检查信元丢失或误插
- MID(10 bit)
- SAR-SDU
- PAD
- LI(6 bit)
- CRC(10 bit)

AAL5

## 性能特征
### 时延
- TD: 传输时延(Transmission Delay)

与传递方式无关
- PD: 打包时延(Packetization Delay)
取决于信元长度和业务源产生信息的速率
- FD: 固定交换时延(Fixed-switching Delay), 交换器在零负荷状态，信元通过交换器的时延

- QD: 排队时延(Queueing Delay), 队列越长，QD越长
- DD: 解包时延(Depacketization Delay)
    终端调节功能，用以去除网络抖动，

$$TD = C · \frac{1}{链路传输速率}$$
$$PD = C · \frac{信元净荷长度}{业务速率}$$
$$FD = C · 信元净荷长度$$
$$QD/DD = C · 信元净荷长度$$
# ATM交换原理
ATM交换: 从一条逻辑ATM信道到一条或多条逻辑ATM信道的信息交换; 而在该交换过程中, 选择可以在许多逻辑ATM信道中进行.

# ATM的业务量控制和拥塞控制
## 一致性检测
GCRA的两种实现: 虚调度算法和连续状态漏桶算法
# IP交换
# 多协议标记交换
# IP QoS
## 保障机制
### 业务量计量和标记
在DiffServ结构中
计量器
标记器的职责
- 对每一个经过计量的IP分组进行标记
- 这个标记被作为网络在以后处理该分组的依据
- 在DiffServ中，对分组设置相应于其服务类型的DSCP值
## 保障框架
举一个生活中的例子，同一局域网

路由器只进行尽力而为的转发，即先到先走。
当我们想让路由器的转发队列按想要的优先级排序时，就有QoS(服务质量)

对于IPv4
对于IPv6

优先级与服务的关系：多对一
传统TCP/IP协议体系满足不了新的业务质量需求

BE: 尽力而为转发
EF: 快速转发
 AF: 确保转发
CS: 类选择, 兼容现有的IPv4 ToS字节中IP优先级字段

AF之间循环调用，EF优先调用

# 作业题
- 根据差错控制协议，计算平均业务量负荷
- AAL3/4的SAR纠错
- ATM网络各时延的相关条件（更改业务效率、链路速率、信元净荷长度，求新的时延）
- 信元的一致性检测(虚调度和)
- 
- 
- 